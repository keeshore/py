<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PulseCare</title>
  {% if gtm_container_id %}
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','{{ gtm_container_id }}');
  </script>
  {% endif %}
  {% if ga_measurement_id %}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ ga_measurement_id }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ ga_measurement_id }}');
  </script>
  {% endif %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script>
    // Tailwind Play CDN (utilities only). Preflight is disabled to avoid conflicts with Bootstrap.
    tailwind = {
      config: {
        corePlugins: { preflight: false },
        theme: {
          extend: {
            boxShadow: {
              glow: '0 0 0 1px rgba(255,255,255,.12), 0 18px 52px rgba(0,0,0,.45)'
            }
          }
        }
      }
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
  {% if recaptcha_site_key %}
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  {% endif %}
  <script>
    window.API_BASE = "{{ api_base }}";
    window.RECAPTCHA_SITE_KEY = "{{ recaptcha_site_key }}";
  </script>
</head>
<body data-page="{{ page }}">
  {% if gtm_container_id %}
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ gtm_container_id }}" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  {% endif %}
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">PulseCare</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="/user/register">User Register</a></li>
          <li class="nav-item"><a class="nav-link" href="/user/login">User Login</a></li>
          <li class="nav-item"><a class="nav-link" href="/hospital/register">Hospital Register</a></li>
          <li class="nav-item"><a class="nav-link" href="/hospital/login">Hospital Login</a></li>
        </ul>
        <div class="d-flex gap-2 align-items-center small">
          <button id="theme-toggle" class="btn btn-outline-light btn-sm" type="button" title="Toggle theme">Theme</button>
          <span id="user-badge" class="badge bg-info d-none"></span>
          <span id="hospital-badge" class="badge bg-warning text-dark d-none"></span>
          <button id="logout-btn" class="btn btn-outline-light btn-sm d-none" type="button">Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    {% block content %}{% endblock %}
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
